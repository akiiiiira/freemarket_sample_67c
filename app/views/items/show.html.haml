.header
  .header__symbol
    .header__symbol--icon-header
      = image_tag "icon-header.svg", alt: "Furima App", size: "140x40", class: "header__symbol--iconImage"
    = text_field_tag "searchWord", "", placeholder: "キーワードから探す" , class: "header__symbol--searchBox"
    .header__symbol--searchButton
      = icon("fas", "search", class:'header__symbol--searchImage') 
  .header__navi
    .header__navi--leftMenu
      .header__navi--categoryButton
        = link_to "カテゴリーから探す", categories_path
        =render "header"
      .header__navi--brandButton
        ブランド
    - if user_signed_in?
      .header__navi--rightMenu
        = link_to "マイページ", new_user_registration_path, class: "header__navi--mypageButton"
        = link_to "ログアウト", destroy_user_session_path, method: :delete, class: "header__navi--logoutButton"
    - else
      .header__navi--rightMenu
        = link_to "ログイン", new_user_session_path, class: "header__navi--loginButton"
        = link_to "新規登録", new_user_registration_path, class: "header__navi--registrationButton"

.main
  .detail-box
    %h1.item-name
      = @item.name
    .detail-box__item-main-content 
      .detail-box__item-main-content__image-area
        - if @item.images.count > 1
          - @item.images.first(1).each do |image|
            .detail-box__item-main-content__image-area__item-photo
              = image_tag image.url, size: '300x300'
          - @item.images[1..-1].each do |image|
            .detail-box__item-main-content__image-area__item-photos
              = image_tag image.url, size:'60x60'
        - elsif @item.images.count == 1
          - @item.images.first(1).each do |image|
            .detail-box__item-main-content__image-area__item-photo
              = image_tag image.url, size: '300x300'
      %table{border: "2", bordercolor: ""}
        %tr
          %th 出品者
          %th
            = @item.user.nickname
        %tr
          %td カテゴリー
          %td
            -if @item.category.nil?
            -else
              = @item.category.name
        %tr
          %td ブランド
          %td
            -if @item.brand.nil?
            -else
              = @item.brand.name
        %tr
          %td 商品のサイズ
          %td
            = @item.size
        %tr
          %td 商品の状態
          %td
            = @item.condition
        %tr
          %td 配送料の負担
          %td
            = @item.shipping_charge
        %tr
          %td 配送の方法
          %td= @item.shipping_way
        %tr
          %td 発送元地域
          %td
            = @item.shipping_origin
        %tr
          %td 発送日の目安 
          %td
            = @item.shipping_schedule
    
    .detail-box__price-box
      %span.item-price
        = @item.price.to_s(:delimited)
      %span.item-tax (税込)
      %span.item-shipping-fee 送料込み

    - if @item.user == current_user
      .detail-box__edit-btn
        = link_to 'この商品を編集する', item_path(@item), class: "edit"
        = link_to 'この商品を削除する', item_path(@item), method: :delete, class: "destroy", data: { confirm: '本当に削除しますか?' }
    - elsif user_signed_in?
      .detail-box__buy-btn
        = link_to "購入画面に進む", confirmation_items_path, class: "detail-box__buy-btn"
    - else
      .detail-box__login-btn
        = link_to "ログインしてください", new_user_session_path, class: "header__navi--loginButton"
        = link_to "新規登録してください", new_user_registration_path, class: "header__navi--registrationButton"

    .detail-box__description
      .detail-box__description__inner
        = simple_format(@item.text)

  .comment-box
    .comment-box__comment-container
      = form_for [@item, @comment] do |f|
        .comment-textarea
          = f.text_area :text, placeholder: "コメントする", size: "65x5"
        .field
          = f.submit '投稿する'
    - if @item.comments
      .comment-box__comment-container__comments
        %h4＜コメント一覧＞
        - @item.comments.each do |comment|
          .comment-box__comment-container__comments__comments-list
            = comment.user.nickname
            さん：
            = comment.text

.footer
  .footer__menu
    %ul
      .footer__menu--title
        FURIMAについて
      %li 会社概要（運営会社）
      %li プライバシーポリシー
      %li FURIMA利用規約
      %li ポイントに関する特約
    %ul
      .footer__menu--title
        FURIMAを見る
      %li カテゴリー一覧
      %li ブランド一覧
    %ul
      .footer__menu--title
        FURIMAについて
      %li FURIMAガイド
      %li FURIMAロゴ利用ガイドライン
      %li お知らせ
  .footer__icon
    = image_tag "icon-footer.svg", alt: "Furima App", size: "140x40", class: "footer__icon--iconImage"
  .footer__trademark
    © FURIMA